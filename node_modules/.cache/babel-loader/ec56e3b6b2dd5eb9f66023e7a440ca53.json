{"ast":null,"code":"import _objectSpread from\"E:/kommit/React/my-movie/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"E:/kommit/React/my-movie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"E:\\\\kommit\\\\React\\\\my-movie\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{SEARCH_BASE_URL,POPULAR_BASE_URL,API_URL,API_KEY,REQUEST_TOKEN_URL,LOGIN_URL,SESSION_ID_URL}from'./config';var defaultConfig={method:'POST',headers:{'Content-Type':'application/json'}};var apiSettings={fetchMovies:function(){var _fetchMovies=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(searchTerm,page){var endpoint;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:endpoint=searchTerm?\"\".concat(SEARCH_BASE_URL).concat(searchTerm,\"&page=\").concat(page):\"\".concat(POPULAR_BASE_URL,\"&page=\").concat(page);_context.next=3;return fetch(endpoint);case 3:_context.next=5;return _context.sent.json();case 5:return _context.abrupt(\"return\",_context.sent);case 6:case\"end\":return _context.stop();}}},_callee);}));function fetchMovies(_x,_x2){return _fetchMovies.apply(this,arguments);}return fetchMovies;}(),fetchMovie:function(){var _fetchMovie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(movieId){var endpoint;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:endpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"?api_key=\").concat(API_KEY);_context2.next=3;return fetch(endpoint);case 3:_context2.next=5;return _context2.sent.json();case 5:return _context2.abrupt(\"return\",_context2.sent);case 6:case\"end\":return _context2.stop();}}},_callee2);}));function fetchMovie(_x3){return _fetchMovie.apply(this,arguments);}return fetchMovie;}(),fetchCredits:function(){var _fetchCredits=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(movieId){var creditsEndpoint;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:creditsEndpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"/credits?api_key=\").concat(API_KEY);_context3.next=3;return fetch(creditsEndpoint);case 3:_context3.next=5;return _context3.sent.json();case 5:return _context3.abrupt(\"return\",_context3.sent);case 6:case\"end\":return _context3.stop();}}},_callee3);}));function fetchCredits(_x4){return _fetchCredits.apply(this,arguments);}return fetchCredits;}(),// Bonus material below for login\ngetRequestToken:function(){var _getRequestToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var reqToken;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(REQUEST_TOKEN_URL);case 2:_context4.next=4;return _context4.sent.json();case 4:reqToken=_context4.sent;return _context4.abrupt(\"return\",reqToken.request_token);case 6:case\"end\":return _context4.stop();}}},_callee4);}));function getRequestToken(){return _getRequestToken.apply(this,arguments);}return getRequestToken;}(),authenticate:function(){var _authenticate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(requestToken,username,password){var bodyData,data,sessionId;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:bodyData={username:username,password:password,request_token:requestToken};// First authenticate the requestToken\n_context5.next=3;return fetch(LOGIN_URL,_objectSpread(_objectSpread({},defaultConfig),{},{body:JSON.stringify(bodyData)}));case 3:_context5.next=5;return _context5.sent.json();case 5:data=_context5.sent;if(!data.success){_context5.next=13;break;}_context5.next=9;return fetch(SESSION_ID_URL,_objectSpread(_objectSpread({},defaultConfig),{},{body:JSON.stringify({request_token:requestToken})}));case 9:_context5.next=11;return _context5.sent.json();case 11:sessionId=_context5.sent;return _context5.abrupt(\"return\",sessionId);case 13:case\"end\":return _context5.stop();}}},_callee5);}));function authenticate(_x5,_x6,_x7){return _authenticate.apply(this,arguments);}return authenticate;}(),rateMovie:function(){var _rateMovie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(sessionId,movieId,value){var endpoint,rating;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:endpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"/rating?api_key=\").concat(API_KEY,\"&session_id=\").concat(sessionId);_context6.next=3;return fetch(endpoint,_objectSpread(_objectSpread({},defaultConfig),{},{body:JSON.stringify({value:value})}));case 3:_context6.next=5;return _context6.sent.json();case 5:rating=_context6.sent;return _context6.abrupt(\"return\",rating);case 7:case\"end\":return _context6.stop();}}},_callee6);}));function rateMovie(_x8,_x9,_x10){return _rateMovie.apply(this,arguments);}return rateMovie;}()};export default apiSettings;","map":{"version":3,"sources":["E:/kommit/React/my-movie/src/API.js"],"names":["SEARCH_BASE_URL","POPULAR_BASE_URL","API_URL","API_KEY","REQUEST_TOKEN_URL","LOGIN_URL","SESSION_ID_URL","defaultConfig","method","headers","apiSettings","fetchMovies","searchTerm","page","endpoint","fetch","json","fetchMovie","movieId","fetchCredits","creditsEndpoint","getRequestToken","reqToken","request_token","authenticate","requestToken","username","password","bodyData","body","JSON","stringify","data","success","sessionId","rateMovie","value","rating"],"mappings":"oVAAA,OACEA,eADF,CAEEC,gBAFF,CAGEC,OAHF,CAIEC,OAJF,CAKEC,iBALF,CAMEC,SANF,CAOEC,cAPF,KAQO,UARP,CAUA,GAAMC,CAAAA,aAAa,CAAG,CACpBC,MAAM,CAAE,MADY,CAEpBC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFW,CAAtB,CAOA,GAAMC,CAAAA,WAAW,CAAG,CAClBC,WAAW,qFAAE,iBAAOC,UAAP,CAAmBC,IAAnB,+HACLC,QADK,CACMF,UAAU,WACpBZ,eADoB,SACFY,UADE,kBACiBC,IADjB,YAEpBZ,gBAFoB,kBAEKY,IAFL,CADhB,uBAISE,CAAAA,KAAK,CAACD,QAAD,CAJd,6CAI0BE,IAJ1B,+GAAF,iGADO,CAOlBC,UAAU,oFAAE,kBAAMC,OAAN,mIACJJ,QADI,WACUZ,OADV,kBAC0BgB,OAD1B,qBAC6Cf,OAD7C,yBAEUY,CAAAA,KAAK,CAACD,QAAD,CAFf,+CAE2BE,IAF3B,mHAAF,2FAPQ,CAWlBG,YAAY,sFAAE,kBAAMD,OAAN,0IACNE,eADM,WACelB,OADf,kBAC+BgB,OAD/B,6BAC0Df,OAD1D,yBAEQY,CAAAA,KAAK,CAACK,eAAD,CAFb,+CAEgCJ,IAFhC,mHAAF,iGAXM,CAelB;AACAK,eAAe,yFAAE,4KACeN,CAAAA,KAAK,CAACX,iBAAD,CADpB,+CACyCY,IADzC,UACTM,QADS,iDAERA,QAAQ,CAACC,aAFD,0DAAF,uGAhBG,CAoBlBC,YAAY,sFAAE,kBAAOC,YAAP,CAAqBC,QAArB,CAA+BC,QAA/B,kJACNC,QADM,CACK,CACfF,QAAQ,CAARA,QADe,CAEfC,QAAQ,CAARA,QAFe,CAGfJ,aAAa,CAAEE,YAHA,CADL,CAMZ;AANY,uBAQJV,CAAAA,KAAK,CAACV,SAAD,gCACNE,aADM,MAETsB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeH,QAAf,CAFG,GARD,+CAYVZ,IAZU,UAONgB,IAPM,oBAcRA,IAAI,CAACC,OAdG,kDAgBFlB,CAAAA,KAAK,CAACT,cAAD,gCACNC,aADM,MAETsB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAER,aAAa,CAAEE,YAAjB,CAAf,CAFG,GAhBH,gDAoBRT,IApBQ,WAeJkB,SAfI,iDAqBHA,SArBG,2DAAF,yGApBM,CA4ClBC,SAAS,mFAAE,kBAAOD,SAAP,CAAkBhB,OAAlB,CAA2BkB,KAA3B,0IACHtB,QADG,WACWZ,OADX,kBAC2BgB,OAD3B,4BACqDf,OADrD,wBAC2E+B,SAD3E,yBAIDnB,CAAAA,KAAK,CAACD,QAAD,gCACNP,aADM,MAETsB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEK,KAAK,CAALA,KAAF,CAAf,CAFG,GAJJ,+CAQPpB,IARO,UAGHqB,MAHG,iDAUFA,MAVE,0DAAF,iGA5CS,CAApB,CA0DA,cAAe3B,CAAAA,WAAf","sourcesContent":["import {\r\n  SEARCH_BASE_URL,\r\n  POPULAR_BASE_URL,\r\n  API_URL,\r\n  API_KEY,\r\n  REQUEST_TOKEN_URL,\r\n  LOGIN_URL,\r\n  SESSION_ID_URL\r\n} from './config';\r\n\r\nconst defaultConfig = {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nconst apiSettings = {\r\n  fetchMovies: async (searchTerm, page) => {\r\n    const endpoint = searchTerm\r\n      ? `${SEARCH_BASE_URL}${searchTerm}&page=${page}`\r\n      : `${POPULAR_BASE_URL}&page=${page}`;\r\n    return await (await fetch(endpoint)).json();\r\n  },\r\n  fetchMovie: async movieId => {\r\n    const endpoint = `${API_URL}movie/${movieId}?api_key=${API_KEY}`;\r\n    return await (await fetch(endpoint)).json();\r\n  },\r\n  fetchCredits: async movieId => {\r\n    const creditsEndpoint = `${API_URL}movie/${movieId}/credits?api_key=${API_KEY}`;\r\n    return await (await fetch(creditsEndpoint)).json();\r\n  },\r\n  // Bonus material below for login\r\n  getRequestToken: async () => {\r\n    const reqToken = await (await fetch(REQUEST_TOKEN_URL)).json();\r\n    return reqToken.request_token;\r\n  },\r\n  authenticate: async (requestToken, username, password) => {\r\n    const bodyData = {\r\n      username,\r\n      password,\r\n      request_token: requestToken\r\n    };\r\n    // First authenticate the requestToken\r\n    const data = await (\r\n      await fetch(LOGIN_URL, {\r\n        ...defaultConfig,\r\n        body: JSON.stringify(bodyData)\r\n      })\r\n    ).json();\r\n    // Then get the sessionId with the requestToken\r\n    if (data.success) {\r\n      const sessionId = await (\r\n        await fetch(SESSION_ID_URL, {\r\n          ...defaultConfig,\r\n          body: JSON.stringify({ request_token: requestToken })\r\n        })\r\n      ).json();\r\n      return sessionId;\r\n    }\r\n  },\r\n  rateMovie: async (sessionId, movieId, value) => {\r\n    const endpoint = `${API_URL}movie/${movieId}/rating?api_key=${API_KEY}&session_id=${sessionId}`;\r\n\r\n    const rating = await (\r\n      await fetch(endpoint, {\r\n        ...defaultConfig,\r\n        body: JSON.stringify({ value })\r\n      })\r\n    ).json();\r\n\r\n    return rating;\r\n  }\r\n};\r\n\r\nexport default apiSettings;\r\n"]},"metadata":{},"sourceType":"module"}